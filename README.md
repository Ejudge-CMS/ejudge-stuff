# Ejudge-контейнер: сборная солянка

## Контейнер изолированного запуска

Модифицированная версия контейнера для запуска недоверенных программ, написанная А.Черновым для тестирующей системы [Ejudge](https://ejudge.ru).

### Инсталляция

Клонируйте репозиторий, зайдите в папку **container** и запустите установочный скрипт **setup.sh** от пользователя **root**.

### Использование

См. [инструкцию](https://ejudge.ru/wiki/index.php/Ej-suid-container). ЗАПЯТУЮ ПЕРЕД ПУТЁМ СТАВИТЬ НЕ НАДО! Также были выкинуты опции mo, mp, mg, mG, mC.

## Двойной запуск

Также написан заголовочный файл **runtwice_seccomp.h** и файл **up_filter.c**, предоставляющие возможность фильтрации системных вызовов. Для использования необходимо _отключить_ фильтрацию системных вызовов во встроенном контейнере, и заполнить соответствующие функции в коде:

1. **process_input** - читает из входного файла, выводит на вход первому запуску
2. **process_first_run** - читает из вывода первого запуска, выводит на вывод второму запуску
3. **process_final** - читает из вывода второго запуска, выводит в выходной файл (в первой строке необходимо вывести 0).

После любого чтения строку НЕ переводить, после любой записи строку НАДО переводить.
